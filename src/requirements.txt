# Python dependencies for the RoboARM web control server
# Install with: pip install -r src/requirements.txt

Flask>=3.0,<4.0
Flask-Cors>=4.0
gpiozero==2.0.1
adafruit-circuitpython-pca9685>=6.0.0
Werkzeug>=2.0

# Dev / Testing
pytest>=7.0
flake8>=6.0
black>=24.0
isort>=5.13
ruff>=0.1.0


# ROS2 for debian
# Install prerequisites
sudo apt update && sudo apt install curl gnupg2 lsb-release -y

# Add ROS2 repository
sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu jammy main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null

# Install ROS2 and colcon
sudo apt update
sudo apt install ros-humble-ros-base python3-colcon-common-extensions python3-rosdep -y

# Initialize rosdep (first time only)
sudo rosdep init
rosdep update

# Source ROS2 environment
source /opt/ros/humble/setup.bash

# Add to your .bashrc for automatic sourcing
echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc
# Note: ROS2 packages (rclpy, etc.) are provided by the system ROS installation
# and should NOT be installed via pip on a ROS-enabled system.
# additionally this code base is on Debian so ROS should be installed using a docker
mamba activate ros_env